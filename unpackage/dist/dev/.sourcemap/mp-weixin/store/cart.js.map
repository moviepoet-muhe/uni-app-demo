{"version":3,"file":"cart.js","sources":["store/cart.js"],"sourcesContent":["import { defineStore } from 'pinia'\n\nconst useCartStore = defineStore('cart', {\n\tstate() {\n\t\treturn {\n\t\t\tcart: [],\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * 总数量\n\t\t */\n\t\ttotalAmount() {\n\t\t\treturn this.cart.reduce((sum, item) => sum + item.amount, 0)\n\t\t},\n\t\t/**\n\t\t * 总金额\n\t\t */\n\t\ttotalPrice() {\n\t\t\treturn this.cart.reduce((sum, item) => sum += item.price * item.amount, 0)\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * 加入购物车\n\t\t * @param {Object} goods\n\t\t */\n\t\taddToCart(goods) {\n\t\t\t// 判断原购物车中是否存在当前选购商品\n\t\t\tconst has = this.cart.some(item => item.id === goods.id)\n\t\t\t// 存在，则叠加选购数量，不存在则将当前选购商品数据保存到购物车数组中\n\t\t\tif (has) {\n\t\t\t\tthis.cart = this.cart.map(item => {\n\t\t\t\t\tif (item.id === goods.id) {\n\t\t\t\t\t\titem.amount += goods.amount ?? 1\n\t\t\t\t\t}\n\t\t\t\t\treturn item\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.cart.push(goods)\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * 从购物车中移除商品\n\t\t * @param {Object} id\n\t\t */\n\t\tremoveFromCart(id) {\n\t\t\tthis.cart = this.cart.filter(item => item.id !== id)\n\t\t},\n\t},\n})\n\nexport default useCartStore\n"],"names":["defineStore"],"mappings":";;AAEK,MAAC,eAAeA,cAAW,YAAC,QAAQ;AAAA,EACxC,QAAQ;AACP,WAAO;AAAA,MACN,MAAM,CAAE;AAAA,IACR;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,cAAc;AACb,aAAO,KAAK,KAAK,OAAO,CAAC,KAAK,SAAS,MAAM,KAAK,QAAQ,CAAC;AAAA,IAC3D;AAAA;AAAA;AAAA;AAAA,IAID,aAAa;AACZ,aAAO,KAAK,KAAK,OAAO,CAAC,KAAK,SAAS,OAAO,KAAK,QAAQ,KAAK,QAAQ,CAAC;AAAA,IACzE;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,IAKR,UAAU,OAAO;AAEhB,YAAM,MAAM,KAAK,KAAK,KAAK,UAAQ,KAAK,OAAO,MAAM,EAAE;AAEvD,UAAI,KAAK;AACR,aAAK,OAAO,KAAK,KAAK,IAAI,UAAQ;AACjC,cAAI,KAAK,OAAO,MAAM,IAAI;AACzB,iBAAK,UAAU,MAAM,UAAU;AAAA,UAC/B;AACD,iBAAO;AAAA,QACZ,CAAK;AAAA,MACL,OAAU;AACN,aAAK,KAAK,KAAK,KAAK;AAAA,MACpB;AAAA,IACD;AAAA;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,IAAI;AAClB,WAAK,OAAO,KAAK,KAAK,OAAO,UAAQ,KAAK,OAAO,EAAE;AAAA,IACnD;AAAA,EACD;AACF,CAAC;;"}