{"version":3,"file":"request.js","sources":["utils/request.js"],"sourcesContent":["/**\n * 封装网络请求\n */\nconst baseURL = 'http://113.45.10.129:3000'\n\n/**\n * 网络请求\n */\nconst request = ({url, method, data, headers = {}} = {}) => {\n\tif (!url) {\n\t\tthrow new Error('请求的url不存在!')\n\t}\n\t// 在 url 前拼接基准 baseURL 地址\n\turl = baseURL + url\n\t// 请求头处理，某些接口需要在请求头中传递用户登录的 token 进行认证\n\tconst token = uni.getStorageSync('token')\n\tif (token) {\n\t\t// header.Authorization = `Bearer ${token}`\r\n\t\theaders = {\r\n\t\t      ...headers,\r\n\t\t      Authorization: `Bearer ${token}`\r\n\t\t    }\n\t}\n\t\n\t// 发送网络请求\n\treturn uni.request({\n\t\turl,\n\t\tmethod,\n\t\tdata,\n\t\theaders,\n\t})\n\t\t.then(res => {\n\t\t\tif (res.statusCode >= 200 && res.statusCode < 300) {\n\t\t\t\tconst {code, data, message} = res.data\n\t\t\t\tif (code === 200) {\n\t\t\t\t\treturn data\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn Promise.reject(message)\n\t\t\t}\n\t\t\t\n\t\t\treturn Promise.reject(new Error('状态码:' + res.statusCode))\n\t\t})\n\t\t.catch(error => {\n\t\t\treturn Promise.reject(error)\n\t\t})\n}\n\n/**\n * 基于 request() 来封装 get 别名方法\n */\nexport const get = (url, data) => request({url, data})\n\n/**\n * 基于 request() 来封装 post 别名方法\n */\nexport const post = (url, data) => request({url, method: 'POST', data})\n\n/**\n * 基于 request() 来封装 put 别名方法\n */\nexport const put = (url, data) => request({url, method: 'PUT', data})\n\nexport default request\n"],"names":["uni","data"],"mappings":";;AAGA,MAAM,UAAU;AAKhB,MAAM,UAAU,CAAC,EAAC,KAAK,QAAQ,MAAM,UAAU,CAAA,EAAE,IAAI,OAAO;AAC3D,MAAI,CAAC,KAAK;AACT,UAAM,IAAI,MAAM,YAAY;AAAA,EAC5B;AAED,QAAM,UAAU;AAEhB,QAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,MAAI,OAAO;AAEV,cAAU;AAAA,MACJ,GAAG;AAAA,MACH,eAAe,UAAU,KAAK;AAAA,IAC/B;AAAA,EACL;AAGD,SAAOA,cAAAA,MAAI,QAAQ;AAAA,IAClB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAE,EACC,KAAK,SAAO;AACZ,QAAI,IAAI,cAAc,OAAO,IAAI,aAAa,KAAK;AAClD,YAAM,EAAC,MAAM,MAAAC,OAAM,QAAO,IAAI,IAAI;AAClC,UAAI,SAAS,KAAK;AACjB,eAAOA;AAAA,MACP;AAED,aAAO,QAAQ,OAAO,OAAO;AAAA,IAC7B;AAED,WAAO,QAAQ,OAAO,IAAI,MAAM,SAAS,IAAI,UAAU,CAAC;AAAA,EAC3D,CAAG,EACA,MAAM,WAAS;AACf,WAAO,QAAQ,OAAO,KAAK;AAAA,EAC9B,CAAG;AACH;AAKY,MAAC,MAAM,CAAC,KAAK,SAAS,QAAQ,EAAC,KAAK,KAAI,CAAC;;"}